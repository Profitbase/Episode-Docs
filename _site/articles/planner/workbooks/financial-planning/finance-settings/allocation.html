<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Allocation | Profitbase Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Allocation | Profitbase Docs ">
      
      <link rel="icon" href="../../../../../images/favicon.ico">
      <link rel="stylesheet" href="../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
  </head>

  <script type="module">
    import options from './../../../../../public/main.js'
    import { init } from './../../../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">


<p><strong>Applies to:</strong> <img src="https://profitbasedocs.blob.core.windows.net/icons/yes-icon.png" alt="img"> Planner 5.4 or later.  <br></p>
<p>This is the setup page for allocation rules. Allocation rules allows for re-allocation (of typically cost) between departments in the same legal entity.  <br></p>
<p>The re-allocation is typically set up from a non-producing or shared services department (giver) to a number of producing departments (bearers) for reporting &quot;full cost&quot;.  <br></p>
<p>Note that the re-allocation is &quot;non-cash&quot;, i.e. assumes no buying and selling between the giver and bearer departments and thus no need for handling of intercompany differences and eliminations. The allocation is therefore done after the execution of the financial engines. Results of the allocations is fed back to the plan overview allowing for input reports that includes allocated cost and is part of the dataset made available for Finance Reports. The following illustration attempts to visualize where in the flow of data the allocation function fits in:  <br></p>
<p><img src="https://profitbasedocs.blob.core.windows.net/enduserhelp/images/Allocation.JPG" alt=""><br></p>
<p>The setup allows you to create one or more allocation rules (e.g. Marketing cost, IT cost, etc) and to associate different giver-bearer relationships, allocation keys (how giver's cost is allocated between bearers) as well as defining which accounts make up giver's cost for each individual rule.  <br></p>
<p>Use cases: <br></p>
<ul>
<li><p>re-allocation from giver department to bearer departments based on a pre-defined (fixed) ratio between bearers.  <br></p>
</li>
<li><p>re-allocation from giver department to bearer departments based on a dynamic keys for the various bearers. Measures in use in the solution (from driver based models or the personnel module such as FTE, Sales qty, etc., as well as report lines associated with the input report such as Sales. Note that for report lines, sum lines that are made up of lines that are mapped to accounts may be used, e.g. Total sales. However, sum lines that are made up of other sum lines are not suppported.<br></p>
</li>
</ul>
<p><img src="https://profitbasedocs.blob.core.windows.net/enduserhelp/images/AllocationSetup.JPG" alt=""><br></p>
<p>The setup screen consists of the following parts:</p>
<ul>
<li><p>Buttons<br></p>
<ul>
<li>New - create new rule<br></li>
<li>Save - save changes to setup<br></li>
<li>Refresh - reload content, unsaved changes are lost<br></li>
<li>Delete - Delete selected rule<br></li>
<li>Execute - execute (run) currently selected allocation rule<br></li>
</ul>
</li>
<li><p>Filters (left margin)<br></p>
<ul>
<li>Allocation rule - filter that allows you to select a specific allocation rule<br></li>
<li>Giver - filter that allows you to select a specific giver<br></li>
<li>Bearer - filter that allows you to select a specific bearer<br></li>
</ul>
</li>
<li><p>Main area - setup tables and reports<br></p>
<ul>
<li>Allocation rule - input table for setting the name of the rule, as well as main rule properties such as:<br>
<ul>
<li>Allocation key - either select fixed ratio (and enter ratio between bearers in the Giver - Bearer input table) or select a measure or report line (allocation keys automatically calculated based on current data)<br></li>
<li>Account - the account to which allocated cost for the rule is attributed. <strong>Note</strong> It is best practise to use separate allocation accounts for each rule for traceability and reporting.<br></li>
<li>Sequence - the sequence of execution (between rules). If a certain rule depends on the output of another rule, make sure to set a higher ssequnce number.<br></li>
<li>Enabled - (true | false) only rules that are set to enabled = true are in effect. Any enabled rules are automatically calculated when the finance baseline is executed.<br></li>
<li>Full dimensionality - (true | false) if set to true, the full dimensionality of the source transactions are used when producing the allocation transactions. If set to false, allocation transactions are aggregated to legal entity, department and account. <strong>Note</strong> In a production environment, full dimensionality should always be set to false due to potentially large amounts of data. Set to true only for quality assurance / debugging.<br></li>
<li>Additional key filter - applies to allocation keys other than fixed ratio, valid part of sql where clause. In certain situations it may be desirable to limit/split the allocation key by another dimension. If for example, the measure Sales qty is used, one might specify and additional key filter ProductID = 'BMW' to limit the sales quantity measure to a certain make. <strong>Note</strong> Only one dimension is supported. Eligible dimension ids are LegalEntityID, DepartmentID, AccountID, ProductID, MarketID, ProjectID, EmployeeID, ActivityID, Dim1, Dim2, Dim3, Dim4.<br></li>
<li>Comment - free text.<br></li>
</ul>
</li>
<li>Giver - Bearer - setup table for giver - bearer relationships<br>
<ul>
<li>Giver - select giver department<br></li>
<li>Bearer - select bearer department<br></li>
<li>Fixed ratio - set a fixed ratio for the bearer. Only relevant if allocation key is set to fixed ratio.<br></li>
<li>Comment - free text<br></li>
</ul>
</li>
<li>Giver Source Definition - setup table for accounts that make up the giver's cost<br>
<ul>
<li>Account - select account.<br></li>
<li>Enabled - (true | false) set to true if account is to be included.<br></li>
<li>Comment - free text.<br></li>
</ul>
</li>
</ul>
<p>The following reports are useful for controlling the output. Requires that the allocation rule is executed, use the Execute button.<br></p>
<ul>
<li>Allocation keys - displays the key for the various bearers.<br></li>
<li>Allocation transactions - displays the first 1000 allocation transactions produced.<br></li>
</ul>
</li>
</ul>
</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>