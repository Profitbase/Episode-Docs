<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Execution of Data Flows using an API | Profitbase Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Execution of Data Flows using an API | Profitbase Docs ">
      
      <link rel="icon" href="../../../../../images/favicon.ico">
      <link rel="stylesheet" href="../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
  </head>

  <script type="module">
    import options from './../../../../../public/main.js'
    import { init } from './../../../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h3 id="execution-of-data-flows-using-an-api">Execution of Data Flows using an API</h3>

<p>Data Flows can be executed through an <strong>HTTP API</strong>. To execute a Data Flow through the API, you need an <strong>API Key</strong>, the <strong>Data Flow Id</strong>, and the <strong>API address</strong>.
<br></p>
<h3 id="getting-an-api-key">Getting an API Key</h3>
<p>To get an API Key to use with the Data Flow Execution API, go to <strong>Application Menu</strong> -&gt; <strong>API Management</strong> -&gt; <strong>Manage API Keys</strong>. In the <strong>Data Flow Execution</strong> tab, find an existing key or create a new one. Use the API Key in the url or header in the request (see the example below).
<br></p>
<h3 id="define-api-key-in-designer">Define API key in designer</h3>
<ol>
<li>Click the Edit command under the API Management menu item.</li>
<li>Select the Access Control tab.</li>
<li>Click the Add button.</li>
</ol>
<br>
<p><img src="https://profitbasedocs.blob.core.windows.net/images/apimanagement.png" alt="apimanagement">
<br></p>
<h3 id="start-execution-api">Start Execution API</h3>
<p>This API starts the execution of a Data Flow. If you do not specify <strong>await=true</strong> as a url parameter, the API will return immediately after the Data Flow has been started. You should then use the Status API to check for completion by providing the RunId.</p>
<p><strong>URL</strong></p>
<p><em>api/pub/v1/dataflows/&lt; id &gt;/start</em></p>
<p><strong>Method</strong></p>
<p>POST</p>
<p><strong>URL Params</strong></p>
<p><em>Required</em><br>
api_key=[api key]</p>
<p><strong>Note!</strong> Optionally, you can provide the API key as a header named x-api-key</p>
<p><em>Optional</em><br>
await=true (default = false)</p>
<p><strong>Note!</strong> Specifying <strong>await=true</strong> tells the API to not reply until the Data Flow has completed execution. You should carefully consider when to use this option, because Data Flows may take from seconds to hours to complete.</p>
<p><strong>Success Response</strong></p>
<p>Code: 200 OK<br>
Content:</p>
<pre><code>{
    runId : &quot;execution run id&quot;, 
    status : &quot;Pending&quot; | &quot;Running&quot; | &quot;Succeeded&quot; | &quot;Failed&quot; 
}
</code></pre>
<p><strong>Error Response</strong></p>
<p>Code: 500 Internal Server Error</p>
<blockquote>
<p><strong>Example</strong></p>
<p>https://mydomain.com/invision/api/pub/v1/dataflows/2b081248-4963-43b3-ba06-5b7403d58b4d/start?api_key=dd63a1ad-60eb-4066-8d71-1721007437b4</p>
</blockquote>
<br>
<h3 id="get-status-api">Get Status API</h3>
<p>Using the <strong>RunId</strong>, you can check the status of a Data Flow execution. You get the <strong>RunId</strong> from the <strong>Start Execution API response</strong>.</p>
<p><strong>URL</strong></p>
<p>api/pub/v1/dataflows/&lt; id &gt;/runs/&lt; runid &gt;/status</p>
<p><strong>URL Params</strong></p>
<p><em>Required</em></p>
<p>api_key=[api key]</p>
<p><strong>Note!</strong> Optionally, you can provide the api key as a header named x-api-key</p>
<p><strong>Method</strong></p>
<p>GET</p>
<p><strong>Success Response</strong></p>
<p>Code: 200 OK<br>
Content:
{
runId : &quot;execution run id&quot;,
status : &quot;Pending&quot; | &quot;Running&quot; | &quot;Succeeded&quot; | &quot;Failed&quot;
}</p>
<p><strong>Error Response</strong>
Code: 500 Internal Server Error</p>
<blockquote>
<p><strong>Example</strong></p>
<p>https://mydomain.com/invision/api/pub/v1/dataflows/2b081248-4963-43b3-ba06-5b7403d58b4d/runs/ad73a1ad-60eb-1066-4d61-1821009431b2/status?api_key=dd63a1ad-60eb-4066-8d71-1721007437b4</p>
</blockquote>
<h3 id="videos">Videos</h3>
<ul>
<li><a href="../../../videos/dataflows.html">Data Flow</a></li>
<li><a href="https://profitbasedocs.blob.core.windows.net/videos/Data%20Flow%20-%20Execute%20from%20Workbook%20with%20arguments.mp4">Execute from Workbook with arguments</a></li>
<li><a href="https://profitbasedocs.blob.core.windows.net/videos/Data%20Flow%20-%20Execute%20using%20dfcmdutil%20command%20line%20tool.mp4">Execute Using dfcmdutil Command Line Tool</a></li>
</ul>
</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>