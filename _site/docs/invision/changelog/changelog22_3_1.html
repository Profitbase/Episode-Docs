<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Change Log 2022.3 pt.1 | Profitbase Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Change Log 2022.3 pt.1 | Profitbase Docs ">
      
      <link rel="icon" href="../../../images/favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
  </head>

  <script type="module">
    import options from './../../../public/main.js'
    import { init } from './../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">


<p><strong>2022.3</strong> brings many new features and enhancements to our low-code platform. A major addition is the ability to define extensions for Packages. That enables Profitbase and partners to develop and distribute add-ons to products. You can also upgrade Packages in multiple Solutions in one go, making it much quicker to upgrade customers to new version of Planner, Risk and Consolidation.
<br></p>
<h2 id="new-features--fixes">New Features &amp; fixes</h2>
<br>
<h3 id="access-control">Access Control</h3>
<br>
<h4 id="sys_objectpermissions">SYS_ObjectPermissions</h4>
<p>The new SYS_ObjectPermissions database view enables Solution Developers to write a SQL query to check if a user has access to a Workbook or Workbook Page.</p>
<div class="NOTE">
<h5>Note</h5>
<p>that the UserUID is the id of the user identity in the InVision access control system, usually a GUID. It is NOT the user name, for example, name@corp.com.</p>
</div>
<pre><code>SELECT HasAccess FROM SYS_ObjectPermissions WHERE UserUID = 'user object id' AND ObjectID = 'workbook or workbook page id'
</code></pre>
<br>
<h4 id="new-access-control-apis-in-macros">New Access Control APIs in macros</h4>
<p>You can now check if a user has access to Workbooks or Workbook Pages using C# macros. The main difference between using the SYS_ObjectPermissions and the macro APIs is that you can use the Workbook and Page names instead of the ids when querying for user access.</p>
<pre><code>public async Task&lt;string&gt; GetQuery()
{
    var userHasAccess = await this.AccessControlService.HasWorkbookAccess(this.Context.GetUserUniqueId(), &quot;Name of Workbook&quot;);
    // your code
}
</code></pre>
<p><a href="../docs/macros/writingmacros/macroexpansionprovider/accesscontrolservice.html">Read more here.</a></p>
<br>
<h3 id="powershell">PowerShell</h3>
<br>
<h4 id="isolation-of-powershell-execution-context">Isolation of PowerShell execution context</h4>
<p>That fixes the assembly loading conflict between PowerShell modules using the same .NET assemblies or NuGet packages as the InVision platform.</p>
<br>
<h4 id="you-no-longer-need-to-pass-in-pbruncontext-to-powershell-apis">You no longer need to pass in pbRunContext to PowerShell APIs</h4>
<p>You no longer need to pass in pbRunContext to Profitbase PowerShell APIs. The current APIs accepting pbRunContext will still work, but they will be removed in a future version. You should make it a priority to switch to using the new APIs.</p>
<br>
<p><strong>Before:</strong></p>
<pre><code>$bytes = [Profitbase.IO.FileStorage]::ReadAllBytes($PbRunContext, $storageName, $fileName)
</code></pre>
<p><strong>After:</strong></p>
<pre><code>$bytes = [Profitbase.IO.FileStorage]::ReadAllBytes($storageName, $fileName)
</code></pre>
<br>
<h4 id="file-storage-api">File Storage API</h4>
<p>We have added PowerShell APIs for File Storage. The API enables you to get the file information, read and delete files from File Storages using PowerShell.</p>
<br>
<pre><code># Get information about file(s) in the File Storage
$query = &quot;DepartmentID = \&quot;${departmentId}\&quot; &amp;&amp; Category = \&quot;${catId}\&quot;&quot;
$fileInfos = [Profitbase.IO.FileStorage]::GetFileInfos($storageName, $query)

foreach($fileInfo in $fileInfos)
{
       # Read a file
       $bytes = [Profitbase.IO.FileStorage]::ReadAllBytes($storageName, $fileInfo.FileName)
       Write-Output $fileInfo.FileName
       Write-Output $fileInfo.ContextJson
       Write-Output $fileInfo.MimeType
       Write-Output $fileInfo.FileReferenceId
}

# Delete a file
[Profitbase.IO.FileStorage]::DeleteFile($storageName, $fileName)
</code></pre>
<br>
<h3 id="packages">Packages</h3>
<br>
<h4 id="package-manager-displays-if-a-package-has-dependencies-with-available-upgrades">Package Manager displays if a Package has dependencies with available upgrades</h4>
<p>You can now easily spot if one of the installed Packages has dependencies with available upgrades. That usually happens when a dependency has a patch release.</p>
<br>
<h4 id="package-extensions">Package Extensions</h4>
<p>We have added support for Package Extensions. That means that developers can create Packages which has the role of extending Products or Libraries. Installing an Extension requires that its dependencies are pre-installed before the extension can be installed. If an Extension extends more than one Product Package, at least one of the Product Packages must be pre-installed.</p>
<br>
<h4 id="better-overview-of-dependencies-and-extensions">Better overview of dependencies and extensions</h4>
<p>Primarily it is a developer feature. We now provide a more detailed overview of dependencies and extensions in the Package Upgrade interface. This feature lists the dependency and extension hierarchy of a Package so you can detect possible version conflicts between packages.</p>
<br>
<h4 id="upgrade-packages-in-multiple-solutions">Upgrade Packages in multiple Solutions</h4>
<p>When upgrading a Package, you can apply the upgrade to multiple Solutions at the same time. Earlier, upgrades would only be applied to Packages in Work Process Blueprint Solutions. You can now apply upgrades to Versioned Solutions that are in the Deployed or Open state.</p>
<br>
<p><img src="https://profitbasedocs.blob.core.windows.net/images/chlog223_1.png" alt="img"></p>
<br>
<h4 id="package-documentation">Package documentation</h4>
<p>We have added support for providing links to Package documentation and upgrade notes. Users can view the docs from the Package installation or upgrade screens.</p>
<br>
<p><img src="https://profitbasedocs.blob.core.windows.net/images/chlog223_2.png" alt="img"></p>
<br>
<h3 id="file-storage">File Storage</h3>
<br>
<h4 id="new-events">New events</h4>
<p>The <strong>Upload Completed</strong> event is raised when a file has been uploaded. That enables processing a file immediately after it has been uploaded.</p>
<p>The <strong>File Deleted</strong> event is raised when a file has been deleted by the user. It is NOT raised if a file is deleted by the backend, for example, using PowerShell.</p>
<br>
<h4 id="bug-fix">Bug fix</h4>
<p>Fixed bug where file dialog appears behind the dialog window.</p>
<br>
<p><a href="changelog22_3_2.html">More New Features &amp; fixes in part two</a></p>
<br>
<h4 id="see-also">See Also</h4>
<ul>
<li><a href="changelog23_6.html">Change Log 2023.6</a></li>
<li><a href="changelog23_5.html">Change Log 2023.5</a></li>
<li><a href="changelog23_4.html">Change Log 2023.4</a></li>
<li><a href="changelog23_3.html">Change Log 2023.3</a></li>
<li><a href="changelog23_2.html">Change Log 2023.2</a></li>
<li><a href="changelog23_1.html">Change Log 2023.1</a></li>
<li><a href="changelog22_5.html">Change Log 2022.5</a></li>
<li><a href="changelog22_4.html">Change Log 2022.4</a></li>
<li><a href="changelog22_3_2.html">Change Log 2022.3 pt 2</a></li>
<li><a href="changelog22_3_1.html">Change Log 2022.3 pt 1</a></li>
<li><a href="changelog22_2.html">Change Log 2022.2</a></li>
<li><a href="changelog52.html">Change Log 5.2</a></li>
<li><a href="changelog51.html">Change Log 5.1</a></li>
<li><a href="changelog5.html">Change Log 5.0</a></li>
<li><a href="changelog41.html">Change Log 4.1</a></li>
<li><a href="changelog40.html">Change Log 4.0</a></li>
</ul>
</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>