<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>API References | Profitbase Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="API References | Profitbase Docs ">
      
      <link rel="icon" href="../../../../../images/favicon.ico">
      <link rel="stylesheet" href="../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
  </head>

  <script type="module">
    import options from './../../../../../public/main.js'
    import { init } from './../../../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<h4 id="cuddatapackage">CudDataPackage</h4>
<p>CudDataPackage contains all rows to insert, update or delete during a save process.</p>
<p><strong>Properties:</strong></p>
<p><strong>All</strong><br>
<code>System.Collections.Generic.List&lt;CudRecord&gt;</code><br>
The list of all the rows in the live data set that was sent to the server from the client. This property only contains data if Rows was set to ‘All’ in the Arguments parts of the OnSave configuration.</p>
<p><strong>Deletes</strong><br>
<code>System.Collections.Generic.List&lt;CudRecord&gt;</code><br>
The list of rows to delete.</p>
<p><strong>Updates</strong><br>
<code>System.Collections.Generic.List&lt;CudRecord&gt;</code><br>
The list of rows to update.</p>
<p><strong>Inserts</strong><br>
<code>System.Collections.Generic.List&lt;CudRecord&gt;</code><br>
The list of rows to insert.</p>
<p><strong>Parameters</strong><br>
<code>System.Collections.Generic.Dictionary&lt;string,object&gt;</code><br>
Custom parameters passed from the client using SetParamValue(“@Param”, value);.</p>
<blockquote>
<p><strong>Example</strong></p>
<p>This example shows how to find all unique account IDs from the list of rows being updated, and then execute a parameterized SQL script for each account id.</p>
<pre><code>  protected override void OnBeginSave(CudDataPackage data)
</code></pre>
</blockquote>
<pre><code>{
base.OnBeginSave(data);    
</code></pre>
<blockquote>
</blockquote>
<pre><code>    object myParam;
if(data.Params != null &amp;&amp; data.Params.TryGetValue(&quot;@SomeParam&quot;, out myParam) == true)
{
    // SetParamValue(“@SomeParam”, someValue); was called when invoking save from the client
}
</code></pre>
<blockquote>
</blockquote>
<pre><code>if(data.Updates != null)
{
var accountIds = (from update in data.Updates
		select update.GetValue&lt;string&gt;(&quot;AccountID&quot;))
               .Distinct();
foreach(var accountId in accountIds)
{
       ExecuteNonQuery(&quot;Update @Object[UpdateHistory]  
       .DbObjectName SET LastChanged = GETDATE() WHERE AccountID = @AccountID&quot;, 
	new QueryParam[]{ new QueryParam(&quot;@AccountID&quot;, accountId) }, true);
        }        
    }
}
</code></pre>
<h4 id="cudrecord">CudRecord</h4>
<p>CudRecord represents a row to insert, update or delete. The values of the row can be read from or written to by using an indexer or the GetValue method described below. The Values collection of the object allows you to iterate over all the values of the row.</p>
<p><strong>Properties:</strong></p>
<p><strong>Values</strong><br>
<code>System.Collections.Generic.List&lt;CudValue&gt;</code><br>
A list of all the values of the row. Each entry has an key and value property describing the column name and value.</p>
<p><strong>Methods:</strong></p>
<p><code>GetValue&lt;T&gt;(string columnName)</code><br>
<em>Objekt of type T</em><br>
Returns the cell value of the specified column as a type. If T does not match the type of the cell or cannot be cast, the operation fails. If the column does not exist, the default value for T is returned.</p>
<p><code>this[string columnName]</code><br>
<em>System.Object</em><br>
Returns the cell value of the specified column. If the column does not exist, a KeyNotFoundException is thrown.</p>
<blockquote>
<p><strong>Example</strong></p>
<p>This example shows how to ensure that the minimum value for Amount is 0 and maximum is 2000 for all rows. The data type of amount is decimal.</p>
</blockquote>
<pre><code>foreach(CudRecord row in rows)
{
    var amount = row.GetValue&lt;decimal?&gt;(&quot;Amount&quot;);
    if(value == null || value &lt; 0.0m)
    {
        row[&quot;Amount&quot;] = 0.0m;
    }     
    else if(value &gt; 2000.0m)
    {
        row[&quot;Amount&quot;] = 2000.0m;
    }   
}
</code></pre>
<h4 id="cudvalue">CudValue</h4>
<p>Represents a cell value.</p>
<p><strong>Properties:</strong></p>
<p><strong>Key</strong><br>
<code>String</code><br>
The name of the column.</p>
<p><strong>Value</strong><br>
<code>System.Object</code><br>
The value of the cell.</p>
</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>